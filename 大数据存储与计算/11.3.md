### 查询无重复条数

```sql
select count(*) from (
	select ts, uid, keyword, url from sogou_ext_20111230 
	group by ts, uid, keyword,url having count(*)=1 ) a;
//子查询后必须跟别名，否则出错
```

### 列出查询次数为1，2，3和大于3的uid

```sql
Select sum(if(uids.cnt=1,1,0)),sum(if(uids.cnt=2,1,0)),
           sum(if(uids.cnt=3,1,0)),sum(if(uids.cnt>3,1,0)) 
          from (select uid,count(*)as cnt from sogou.sogou_ext_20111230 group by uid)uids;
```

### 查找关键字中包含www,且url中包括关键字的记录条数

```sql
select sum(if(instr(url,keyword)>0,1,0))from (
select * from sogou.sogou_ext_20111230
where keyword like '%www%')  a;
```

说明：

instr(a,b)返回字符b在字符a中的位置，如果存在则返回位置，不存在则返回0

if函数 

% 表示一个或多个字符





